# Kube Node Ready Controller Configuration
# Example configuration without CPU limits (recommended for loaded clusters)
# This demonstrates that resource limits are optional

# Worker Pod Configuration
worker:
  # Container image configuration
  image:
    repository: ghcr.io/imunhatep/kube-node-ready
    tag: "0.2.6"
    pullPolicy: IfNotPresent

  # Kubernetes settings
  # Note: namespace is auto-detected from controller's environment (POD_NAMESPACE env var or service account)
  # You can explicitly set it here for backwards compatibility, but it's not required
  # namespace: kube-system
  timeoutSeconds: 300

  # Optional: Service account for worker pods (defaults to namespace default)
  serviceAccount: ""

  # Priority class for worker pods
  priorityClassName: system-node-critical

  # Resource requests and limits for worker pods
  # Note: CPU limits are not set - this is recommended for loaded clusters
  # to avoid CPU throttling during checks
  resources:
    requests:
      cpu: "50m"
      memory: "64Mi"
    limits:
      # cpu: ""  # No CPU limit - allows bursting when needed
      memory: "128Mi"  # Memory limit still recommended to prevent OOM

  # ConfigMap name containing worker runtime configuration
  configMapName: kube-node-ready-worker

# Reconciliation Configuration
reconciliation:
  intervalSeconds: 30
  maxRetries: 5
  retryBackoff: exponential

# Node Management Configuration
nodeManagement:
  deleteFailedNodes: false
  taints:
    - key: node-ready/unverified
      value: "true"
      effect: NoSchedule
  verifiedLabel:
    key: node-ready/verified
    value: "true"

# Metrics Configuration
metrics:
  enabled: true
  port: 8080

# Health Check Configuration
health:
  port: 8081

# Logging Configuration
logging:
  level: info
  format: json

# Kubernetes Client Configuration
kubernetes:
  kubeconfigPath: ""
  qps: 50
  burst: 100

